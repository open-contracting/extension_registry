language: python
cache:
  directories:
#    - extensions_repositories
    - $HOME/.cache/pip
python:
  - "3.6"
env:
  - BASEDIR="https://raw.githubusercontent.com/open-contracting/standard-maintenance-scripts/master"
install:
  - curl -s -S --retry 3 $BASEDIR/tests/install.sh | bash -
  - pip install .[test]
script:
  - curl -s -S --retry 3 $BASEDIR/tests/script.sh | bash -
  - PYTHONPATH=$PYTHONPATH:.  pytest --pyargs ocdsextensionregistry.tests
  - python validate.py
#  - python compile.py

# For previous way of doing the extension registry, we used Travis to deploy the built files.
# See https://github.com/open-contracting/extension_registry/blob/055c7e61f64689ab82205c0bb6f1e10d56181171/.travis.yml
# The python compile.py and cache directory above have been tested and are ready for when we want to do this again.
