# We used Travis to deploy the built files. To resume deployment, uncomment and test the YAML below.
# See this file from before the re-structuring: https://github.com/open-contracting/extension_registry/blob/055c7e61f64689ab82205c0bb6f1e10d56181171/.travis.yml

language: python
cache: pip
python:
  - "3.6"
addons:
  apt:
    packages:
    - lftp
# deploy:
#   skip_cleanup: true
#   provider: script
#   script: curl -Ss https://raw.githubusercontent.com/OpenDataServices/opendataservices-deploy/master/open-contracting-extension_registry-deploy.sh | bash -
#   on:
#     all_branches: true
#     condition: $TRAVIS_PULL_REQUEST = false
env:
  - BASEDIR="https://raw.githubusercontent.com/open-contracting/standard-maintenance-scripts/master"
install:
  - curl -s -S --retry 3 $BASEDIR/tests/install.sh | bash -
  - pip install .[test]
script:
  - pytest --cov ocdsextensionregistry
  - python validate.py
  - python compile.py
after_success:
  coveralls
